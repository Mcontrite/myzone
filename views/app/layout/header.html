{{ define "layout/header" }}
{{ template "layout/header.inc" .}}
<header class="navbar navbar-expand-lg navbar-dark bg-dark" id="header">
	<div class="container">
		<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#nav" aria-controls="navbar_collapse"
		 aria-expanded="false" aria-label="展开菜单">
			<span class="navbar-toggler-icon"></span>
		</button>
		<a class="navbar-brand text-truncate" href="/">
			<img src="/static/img/logo.png" class="logo-2">
		</a>
			<div class="collapse navbar-collapse" id="nav">
			<!-- 左侧：版块 -->
			<ul class="navbar-nav mr-auto">
				<li class="nav-item home" fid="0" data-active="fid-0">
					<a id="fid-0" class="nav-link nav-link" href="/">
						<i class="icon icon-home icon-fw"></i> 首页 </a>
				</li>
				<li class="nav-item home" fid="0" data-active="fid-0">
					<a id="fid-0" class="nav-link nav-link" href="/articles">
						<i class="icon icon-book icon-fw"></i> 文章 </a>
				</li>
				<li class="nav-item home" fid="0" data-active="fid-0">
					<a id="fid-0" class="nav-link nav-link" href="/sayings">
						<i class="icon icon-cloud icon-fw"></i> 说说 </a>
				</li>
			</ul>
			<!-- 右侧：用户 -->
			<ul class="navbar-nav">
				{{if .islogin}}
				<li class="nav-item username">
					<a class="nav-link" href="/my.html"><img class="avatar-1" src="{{.sessions.Useravatar}}">
						{{.sessions.Username}}
					</a>
				</li>
				<!-- 管理员 -->
				{{if eq .sessions.Isadmin "1"}}
				<li class="nav-item"><a id="adminindex" class="nav-link" href="/admin/index.html"><i class="icon-home"></i> 后台管理</a></li>
				{{end}}
				<li class="nav-item"><a id="logout" class="nav-link" href="#"><i class="icon-sign-out"></i> 退出</a></li>
				{{else}}
				<li class="nav-item"><a class="nav-link" href="/login.html"><i class="icon-user"></i> 登录</a></li>
				{{end}}
			</ul>
		</div>
	</div>
</header>
<script>
	$("#adminindex").attr("href", "/admin/index.html?token=" + sessionStorage.getItem("admin_token"))
    $("#logout").on('click', function () {
        $.xget("/api/logout", function (code, message) {
            console.log(code, message)
            $.alert("退出成功,1秒后跳转到首页")
            setTimeout(function () {
                location.href = "/"
            }, 500)
        });
    })
    if ({{.fid }}) {
        $('#fid-{{.fid}}').addClass('active');
    } else {
        $('#fid-0').addClass('active');
    }
</script>
{{ end }}
